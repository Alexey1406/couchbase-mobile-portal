<guide xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../docs.xsd"
    id="release-notes">
    <title>Release notes</title>
    <description>Release notes for Couchbase Lite.</description>
    <introduction>
        <paragraph>
            Release notes for native support on the expanding Couchbase Lite platform.
        </paragraph>
    </introduction>
    <articles>
        <article id="iOS">
            <title>iOS</title>
            <description>Here you can find release notes for Couchbase Lite for iOS.</description>
            <introduction/>
            <topics>
            	<topic id="1.0.2">
                    <title>1.0.2, August 22, 2014</title>
                    <body>
                        <paragraph>    
                            In our second quality release, we have added optimizations and fixes for map/reduce, fixes to our SSL support and Replication API, 
                            behavior corrections in CBLModel, addressed a number of issues filed on the changes feed, added a few iOS-specific APIs, and more.
                            Let's go through some of these changes as follows:
                        </paragraph>
                        
                        <section id="102-optimizations">
                        	<title>Map/Reduce optimizations</title>
                        	<body>
                        		<paragraph>
                        			<strong>Optimize view performance by re-indexing multiple views together:</strong>
									When updating a view's index, Couchbase Lite now also updates other related views' indexes simultaneously. This saves time because a lot of the work (iterating through the sequences, fetching the documents, looking for conflicts) is shared.
									The other views that will get updated are the ones whose names share the same prefix up through the first "/". (This is the same rule used by CouchDB.) If the view's name does not include a "/", it won't be indexed with any other views.
									To take advantage of this, you should name your views so that views that are often used together — like in the same screen of your UI — share a common prefix. (For instance, "tasklist/bydate", "tasklist/commentcount")
									(<external-ref href="https://github.com/couchbase/couchbase-lite-ios/commit/09b9a75">Commit 09b9a75</external-ref>)
                    		    </paragraph>
		                        <paragraph>
        		                	<strong>Optimization for map functions that emit 'doc' as the value:</strong>
									It's still better for performance to not emit the entire document as a value, but there are some apps that do it because they're following old/obsolete advice or sample code, so we've optimized it to reduce the slowdown.
									(<external-ref href="https://github.com/couchbase/couchbase-lite-ios/commit/03454e8">Commit 03454e8</external-ref>)
        		                </paragraph>
                        
	                	        <paragraph>
    		                    	<strong>Several other view-indexing performance optimizations.</strong>
									(<external-ref href="https://github.com/couchbase/couchbase-lite-ios/commit/59594d4">Commits 59594d4</external-ref>, <external-ref href="https://github.com/couchbase/couchbase-lite-ios/commit/ce3ea09">ce3ea09</external-ref>)
                    		    </paragraph>                    		    
                        	</body>
                        </section>
                        
                        <section id="102-ssl">
                        	<title>Fixes for SSL server cert trust checking</title>
                        	<body>
                        		<unordered-list>
                        			<list-item>CBLSocketChangeTracker now allows a self-signed cert, provided the replicator allows it (i.e. app has configured that root cert.)</list-item>
                        			<list-item>The replicator now stops completely on an SSL trust error instead of retrying.</list-item>
                        			<list-item>Replicator now sets the correct error code when it comes across an untrusted server cert. (Invalid-cert, not auth-canceled.) (<external-ref href="https://github.com/couchbase/couchbase-lite-ios/commit/d222ba1">Commit d222ba1</external-ref>)</list-item>
                        		</unordered-list>
                        	</body>
                        </section>
                        
                        <section id="102-replicator">
                        	<title>Replicator fixes</title>
                        	<body>
                        		<unordered-list>
                        			<list-item>Fixes for "_asyncTaskCount >= 0" assertion failures</list-item>
                        			<list-item>Fixes for checkpoints not being saved or for 409 Conflict errors saving checkpoints</list-item>
                        		</unordered-list>
                        	</body>
                        </section>                        
                        
                        <section id="102-api">
                        	<title>API additions</title>
                        	<body>
                        <paragraph>
                        	We have also made some iOS-specific API additions that include the following:
                        </paragraph>
                        
                        <unordered-list>
                        	<list-item>
                        		<strong>CBLJSON.h:</strong>
                        		<paragraph>
                        			<code-block language="objective-c"><![CDATA[
                        		    	+ (NSString*) JSONObjectWithDate: (NSDate*)date timeZone:(NSTimeZone *)tz;
                        			]]>
                        			</code-block>
                        		</paragraph>
                        	</list-item>
                        	<list-item>
                        		<strong>CBLManager.h:</strong>
                        		<paragraph>
                        			<code-block language="objective-c"><![CDATA[
                        				//Added to struct CBLManagerOptions:
        								NSDataWritingOptions fileProtection;    /**< File protection/encryption options (iOS only) */

    									/** Should the databases and attachments be excluded from iCloud or Time Machine backup?
        									Defaults to NO. */
    									@property BOOL excludedFromBackup;

									    /** Redirects Couchbase Lite logging: instead of writing to the console/stderr, it will call the
									        given block. Passing a nil block restores the default behavior. */
									    + (void) redirectLogging: (void (^)(NSString* type, NSString* message))callback;
									    ]]>
                        			</code-block>
                        		</paragraph>
                        	</list-item>
                        	<list-item>
                        		<strong>CBLReplication.h:</strong>
                        		<paragraph>
                        			<code-block language="objective-c"><![CDATA[
	    								/** Suspends/resumes a replication.
        								On iOS a replication will suspend itself when the app goes into the background, and resume
        								when the app is re-activated. If your app receives a push notification while suspended and needs
        								to run the replication to download new data, your handler should set suspended to NO to resume
        								replication, and then set the property back to YES when it's done. */
    									@property BOOL suspended;
                        			]]>
                        			</code-block>
                        		</paragraph>
                        	</list-item>
                        </unordered-list>                        
                        	</body>
                        </section>
                        
                        <paragraph>
                        	Some additional fixes we'd like to highlight include:
                        </paragraph>
                        <unordered-list>
                        	<list-item>
                        		Fixes to CBLModel <external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/310">#310</external-ref>,
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/363">#363</external-ref>
                        	</list-item>
                        	<list-item>
                        		Corrupt response to Content-Range requests if already in client's cache 
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/317">#317</external-ref>
                        	</list-item>                        	
                        	<list-item>
                        		App being rejected due to iCloud backup
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/357">#357</external-ref>
                        	</list-item>
                        	<list-item>
                        		WebSocket change tracker doesn't work with CBLAuthenticator
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/400">#400</external-ref>
                        	</list-item>
                        	<list-item>
                        		CBLSocketChangeTracker/CBLJSONReader SIGSEGV crashes
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/369">#369</external-ref>
                        	</list-item>
                        	<list-item>
                        		_changes JSON response from Sync Server fails parsing
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/384">#384</external-ref>
                        	</list-item>
                        	<list-item>
                        		Infinite loop on CBLDocument update 
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/349">#349</external-ref>
                        	</list-item>
                        	<list-item>
                        		The draconian thread-safety check is not sufficient to detect compatible queues
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/376">#376</external-ref>
                        	</list-item>
                        	<list-item>
                        		CBLQuery doesn't call observer on dispatch queue
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/364">#364</external-ref>
                        	</list-item>
                        	<list-item>
                        		Failing assertion in CBLQueryRow due to unset _database
                        		<external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/403">#403</external-ref>
                        	</list-item>
                        </unordered-list>
                    </body>
                </topic>
            
            	<topic id="1.0.1">
                    <title>1.0.1, July 22, 2014</title>
                    <body>
                        <paragraph>
                            This is our first patch release for 1.0.0, 
                            that features fixes for higher impact issues in our Document, change tracker, and map/reduce APIs.
                        </paragraph>
                        
                        <unordered-list>
                        	<list-item>Fixed a bug in <code>-[CBLDocument update:error:]</code> that could cause an infinite loop if the update was blocked by a conflicting update. <external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/349">#349</external-ref></list-item>
                        	<list-item>Hide any passwords in URLs logged by <code>CBLSocketChangeTracker</code></list-item>
                        	<list-item>Fixed some mistakes in documentation-comments in CBLQuery.h <external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/342">#342</external-ref>, <external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/343">#343</external-ref></list-item>
                        	<list-item>Make <code>[-CBLQueryRow description]</code> not crash if the row's value is nil <external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/318">#318</external-ref></list-item>
                        	<list-item><code>CBLQuery</code> now calls its observer on the correct dispatch queue <external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/364">#364</external-ref></list-item>
                        	<list-item>Database-change notifications are now delivered correctly when using dispatch queues <external-ref href="https://github.com/couchbase/couchbase-lite-ios/issues/364">#364</external-ref></list-item>
                        </unordered-list>
                    </body>
                </topic>
                <topic id="1.0.0">
                    <title>1.0.0, May 21, 2014</title>
                    <body>
                        <paragraph>
                            This is our first official release for Couchbase Lite. A major change from our Beta releases and 1.0.0
                            is an expansion of our platform support, which includes a 1.0.0 ready version of "portable" Java libraries
                            to support Linux-based app development. We've also made a lot of advancement in the performance stability of
                            our Android and Java platform, created better parity for our authentication support, and enabled better
                            logging for community debugging feedback. Simultaneously to this release, we have also published our first
                            beta for our C# support in a collaborative effort with our partner, Xamarin.
                        </paragraph>
                        
                        <paragraph>
                            As we continue to build out our platform, we have made some API naming changes to reflect a strengthened spec that
                            supports us across many different spaces. Between our last Beta and 1.0.0, we've made some minor adjustments to 
                            our naming conventions regarding basic authentication, cookie-based authentication, and logging support.
                        </paragraph>
                    </body>
                </topic>
            </topics>
        </article>
        <article id="Android">
            <title>Android</title>
            <description>Here you can find release notes for Couchbase Lite for Android.</description>
            <introduction/>
            <topics>
            	<topic id="1.0.2">
                    <title>1.0.2, August 22, 2014</title>
                    <body>
                        <paragraph>
                            This is our second patch release for 1.0.0. As we continue to firm up our existing quality and performance while building toward
                            enhancements and features, we've gone over and done a number of major improvements on our built-in test infrastructure including using
                            a mockwebserver that better simulates "un"-happy network paths.
                        </paragraph>
                        
                        <paragraph>
                        	We also addressed a number of major behavior issues around replication, and purged or deleted documents, as well as our pluggable cookie-based auth support. 
                        	More information regarding these highlighted functional fixes can be found below.
                        </paragraph>
                        
                        <unordered-list>
                        	<list-item>Convert tests that run against Sync Gateway to use mockwebserver <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/358">#358</external-ref>, <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/354">#354</external-ref>, <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/352">#352</external-ref>, <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/331">#331</external-ref></list-item>
                        	<list-item>Ability to test both Sync Gateway and CouchDB flavors of replication protocol <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/356">#356</external-ref></list-item>
                        	<list-item>Multiple calls to replication.goOnline() start excessive unwanted change trackers <external-ref href="https://github.com/couchbase/couchbase-lite-java-core/issues/253">#253</external-ref></list-item>
                        	<list-item>Puller doesn't finish when a purged doc is received on the changes feed <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/376">#376</external-ref></list-item>
                        	<list-item>If document have _deleted : true then no body is saved. <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/301">#301</external-ref></list-item>
                        	<list-item>Cookie-Based auth from third party does not work on Android <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/241">#241</external-ref></list-item>
                        	<list-item>Finding data related to database completely synced or not <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/207">#207</external-ref></list-item>
                        	<list-item>Unexpected local checkpoint behavior <external-ref href="https://github.com/couchbase/couchbase-lite-java-core/issues/231">#231</external-ref></list-item>
                        	<list-item>View.updateIndex() results in endless loop <external-ref href="https://github.com/couchbase/couchbase-lite-java-core/issues/214">#214</external-ref></list-item>
                        </unordered-list>
                    </body>
                </topic>
            
             	<topic id="1.0.1">
                    <title>1.0.1, July 22, 2014</title>
                    <body>
                        <paragraph>
                            This is our first patch release for 1.0.0. Our core focus for this patch was to address immediate behavior correctness issues as well as an overall 
                            performance improvement around Attachment replication and LiveQuery updates.
                        </paragraph>
                        
                        <unordered-list>
                        	<list-item>Able to push Replication of Documents with Attachments against CouchDB <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/214">#214</external-ref></list-item>
                        	<list-item>Fixed <code>forceInsert</code> does not call <code>ValidationBlock</code>. <external-ref href="https://github.com/couchbase/couchbase-lite-java-core/issues/206">#206</external-ref></list-item>
                        </unordered-list>
                    </body>
                </topic>
                
                <topic id="1.0.0">
                    <title>1.0.0, May 21, 2014</title>
                    <body>
                        <paragraph>
                            This is our first official release for Couchbase Lite. A major change from our Beta releases and 1.0.0
                            is an expansion of our platform support, which includes a 1.0.0 ready version of "portable" Java libraries
                            to support Linux-based app development. We've also made a lot of advancement in the performance stability of
                            our Android and Java platform, created better parity for our authentication support, and enabled better
                            logging for community debugging feedback. Simultaneously to this release, we have also published our first
                            beta for our C# support in a collaborative effort with our partner, Xamarin.
                        </paragraph>
                        
                        <paragraph>
                            There is a known security issue for Android PhoneGap/REST developers using API Level 17 and below. This 
                            issue is captured in the following issue: <external-ref href="https://github.com/couchbase/couchbase-lite-java-listener/issues/48">#48</external-ref> 
                        </paragraph> 
                        
                        <paragraph>
                            There are known performance issues that we plan to fix before general release. These performance issues include slowness in replication and in view creation.
                            These issues include the following: <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/123">123</external-ref>, <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/125">125</external-ref>, <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/126">126</external-ref>
                        </paragraph>
                        
                        <paragraph>
                        	This is a known issue that multiple updates to a single document within a single transaction will cause a conflict error. This
                        	issue is currently being reviewed and addressed in the following: <external-ref href="https://github.com/couchbase/couchbase-lite-android/issues/220">220</external-ref>.
                        </paragraph>
                    </body>
                </topic>
            </topics>
        </article>
        <article id="Java">
            <title>Java</title>
            <description>Here you can find release notes for Couchbase Lite for Java.</description>
            <introduction/>
            <topics>
             	<topic id="1.0.1">
                    <title>1.0.1, July 28, 2014</title>
                    <body>
                        <paragraph>
                            This is our first patch release for 1.0.0. A large number of the fixes that impacted Android are also incorporated into this release. There are no especial
                            Java-only fixes for this particular patch.
                        </paragraph>
                    </body>
                </topic>
                
                <topic id="1.0.0">
                    <title>1.0.0, May 21, 2014</title>
                    <body>
                        <paragraph>
                            This is our first official release for Couchbase Lite. A major change from our Beta releases and 1.0.0
                            is an expansion of our platform support, which includes a 1.0.0 ready version of "portable" Java libraries
                            to support Linux-based app development. We've also made a lot of advancement in the performance stability of
                            our Android and Java platform, created better parity for our authentication support, and enabled better
                            logging for community debugging feedback. Simultaneously to this release, we have also published our first
                            beta for our C# support in a collaborative effort with our partner, Xamarin.
                        </paragraph>
                        
                        <paragraph>
                            Java shares a core set of libraries with our Android platform, and faces a similar set of known issues regarding performance that we are actively addressing.
                            In particular, we are resolving replication issues with high bulk volumes of data between Java client and Server that show
                            minute memory leaks.
                        </paragraph>
                        
                        <paragraph>
                            We are also expanding our built library package offering. Today we offer 32-bit and 64-bit Linux support, suitable
                            for building apps on platforms such as the Raspberry Pi. We are also looking into packaging for other desktop platforms 
                            and will be releasing them soon.
                        </paragraph>
                    </body>
                </topic>
            </topics>
        </article>
        <article id="Dot-Net">
            <title>.NET</title>
            <description>Here you can find release notes for Couchbase Lite for .NET.</description>
            <introduction/>
            <topics>
                <topic id="1.0.0-Beta 2">
                    <title>1.0.0-Beta 2, July 08, 2014</title>
                    <body>
                        <paragraph>In our second Beta release of C# support, we have included a couple of fixes from early feedback, strengthened our test suite coverage and set the groundwork for
                        additional .NET platform support.</paragraph>
                        <paragraph>Highlights</paragraph>
                        <unordered-list>
                            <list-item>Attachments now work.</list-item>
                            <list-item>Fixed: Crashes with "non-page-aligned, non-allocated pointer being freed" error.</list-item>
                            <list-item>Lays the groundwork for supporting additional .NET platforms.</list-item>
                            <list-item>Passes lots of additional tests.</list-item>
                            <list-item>General stability improvements.</list-item>
                        </unordered-list>
                        
                        <paragraph>Known issues</paragraph>
                        <unordered-list>
                            <list-item>Authentication is not supported yet.</list-item>
                            <list-item>Only targets Xamarin.iOS and Xamarin.Android.</list-item>
                        </unordered-list>
                    </body>
                </topic>
                <topic id="1.0.0-Beta 1">
                    <title>1.0.0-Beta 1, May 21, 2014</title>
                    <body>
                        <paragraph>In our first Beta release of C# support, we have a majority of features ported over from our Java libraries, but still have a remaining amount of
                            work and progress to make, specifically in Replication. We also still need to develop a working and distributable PCL for full .NET support, but in the meantime you can
                            make use of the Xamarin binding for C# for iOS and Android.</paragraph>
                        <paragraph>Replication</paragraph>
                        <unordered-list>
                            <list-item>Basic Authentication is not supported: Issue #<external-ref href="https://github.com/couchbaselabs/couchbase-lite-net/issues/10">10</external-ref>.</list-item>
                            <list-item>New Authenticator and AuthenticatorFactory are not implemented: Issue #<external-ref href="https://github.com/couchbaselabs/couchbase-lite-net/issues/33">33</external-ref>.</list-item>
                            <list-item>Cookie management is not supported: Issue #<external-ref href="https://github.com/couchbaselabs/couchbase-lite-net/issues/34">34</external-ref>.</list-item>
                            <list-item>HTTPS is not supported: Issue #<external-ref href="https://github.com/couchbaselabs/couchbase-lite-net/issues/9">9</external-ref>.</list-item>
                        </unordered-list>
                        
                        <paragraph>Portable Class Library Support</paragraph>
                        <unordered-list>
                            <list-item>The library is currently not a .NET Framework Portable Class Library: Issue #<external-ref href="https://github.com/couchbaselabs/couchbase-lite-net/issues/5">5</external-ref>.</list-item>
                        </unordered-list>
                    </body>
                </topic>
            </topics>
        </article>
    </articles>
</guide>